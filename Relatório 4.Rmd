---
title:  Ciência de Dados para Todos (Data Science
  For All) - 2018.1 - Análise da Produção Científica e Acadêmica da Universidade de Brasília - Relatório Final da Disciplina - Departamento de Ciência da Computação da UnB
author: "Jorge H. C. Fernandes, Ricardo B. Sampaio, João Ribas de Moura e Jerônimo A. Filho"
date: "11/06/2018"
output:
  html_document:
    df_print: paged
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r libraries, echo=FALSE, results='hide'}
#library(jsonlite)
#library(readxl)
#library(tidyr)
# library(reshape2)
suppressMessages(library("tidyverse"))
setwd("~/R/Data-Science")
```


# Introdução

O presente relatório tem por objetivo descrever e analisar 3 programas de pós-graduação da UNB, tendo como foco principal dois programas de Pós-Graduação em Matemática da UnB e o  programa de Ensino em Ciências.
Serão analisados o contexto dos programas de pós-graduação (PPG), para que sejam expostas de maneira organizada as informações levantadas pelos datasets disponibilizados pela plataforma do E-Lattes. Também serão propostas relações com outras bases de dados da UNB como a base do DGP(dados de grupos de pesquisa) e da base OASIS que contém informações sobre as produções nacionais. A metodologia de análise a ser seguida é uma aproximação ao CRISP-DM que visa unificar as formas de se realizar mineração de dados, para que os procedimentos possam ser reproduzidos e possuem algum nivel de confiabilizade com relação ao resultados obtidos.

...

#Metodologia

## Delimitações iniciais
Em aderência à estrutura do CRISP-DM, algumas delimitações de contexto para o trabalho são apresentadas a seguir:

###Domínio de Aplicação do projeto
O domínio de aplicação do projeto é o da produção científica e acadêmica brasileira, mais específicamente a produção científica ou produção acadêmica de um subgrupo de pesquisadores vinculados à Universidade de Brasília. O domínio de aplicação do projeto deve ser declarado na introdução ao relatório.

<!--registrada na [base de currículos Lattes](lattes.cnpq.br), do CNPq.-->

###Tipo de Problema abordado

O tipo de problema abordado é o da produção de análises descritivas, quantitativas e de modelagem computacional ou estatística, que permitam caracterizar como e porque ocorre a produção científica e acadêmica de um grupo de pesquisadores. Essa caracterização visa subsidiar a tomada de decisão por membros do Sistema Nacional de Pós-Graduação. O tipo de problema abordado no projeto deve ser declarado na introdução ao relatório.

##Modelo de Referência CRISP-DM

Miner (2012), aprofunda: “(…) In CRISP-DM, the complete life cycle of a data mining project is represented with __six phases__: business understanding (determining the purpose of the study), data understanding (data exploration and understanding), data preparation, modeling, evaluation, and deployment.(…). [Miner, Gary. Practical Text Mining and Statistical Analysis for Non-structure Text Data Applications. Academic Press, 2012.]

###Por que usar o CRISP-DM?

Imagine uma analogia entre um projeto de datamining e a preparação de uma receita de bolo para ser usada em uma fábrica. Para iniciar a produção, com base numa receita de comprovada eficácia (metodológica e científica), você tem que minerar os ingredientes (dados) em um grande supermercado (_dataset_). Com os ingredientes você precisa aplicar um método (a forma de misturá-los), colocar os ingredientes numa determinada ordem, mexer por um certo tempo, aquecer por tantos minutos até o bolo ficar pronto e ser aprovado em um ou mais testes de degustação. 

Tendo por objetivo fazer com que essa receita (script de mineração de dados) possa ser executada com sucesso diversas vezes, numa fábrica, será que outro cozinheiro (cientista) que reproduzisse a receita (método) chegaria ao mesmo resultado? Se a metodologia (receita) já foi bastante  testada, então é bem provável que o resultado será o mesmo e seu produto (receita de bolo) será aceito para a produção (_deployment_) de análises para consumo futuro, com base em fundamentos científicos.

### Organização hierárquica de atividades em fases

Dentro de cada fase no CRISP-DM existe uma estrutura hierárquica de atividades genéricas para serem realizadas. Cada uma dessas atividades __genéricas__ pode determinar a execução de atividades __específicas__. 

Voltando ao exemplo do bolo, a atividade ” 1. Entendimento do Bolo” poderia conter uma atividade genérica chamada “1.1. Determinar para que o bolo servirá (simples café da manhã? bolo de aniversário? bolo de casamento?)“. Dentro dessa atividade genérica poderia haver atividades específicas como “1.1.1.Entrevistar o contratante para obter detalhes de onde o bolo será usado?“; “1.1.2. Conversar com os convidados sob alguma necessidade especial (sem lactose? sem glútem?)“, etc. 

# CRISP-DM Fase 1 - Entendimento do Negócio

##O que é o Sistema Nacional de Pós-Graduação? (Contextualização)

A produção do conhecimento científico, no Brasil, é predominantemente efetuada por meio do Sistema Nacional de Pós-Graduação - SNPG, e mais fortemente relacionada com a formação de doutores nesse sistema (Pátaro e Mezzomo, 2013), por meio de cursos de pós-graduação _strictu sensu_. 

Fernandes e Sampaio (2017) já indicaram que a ciência é reconhecidamente um elemento essencial para o desenvolvimento social e econômico de qualquer nação.
Assim sendo, faz-se mister aprimorar o SNPG como forma de promoção desse crescimento, visando maximizar o retorno decorrente do emprego dos recursos nele aplicados. 
A promoção do crescimento do SNPG se dá predominantemente por meio de avaliações regulares de seus programas de pós-graduação, sob responsabilidade da CAPES, que realiza a cada quatro anos um complexo (Leite, 2018, p. 13) e custoso processo de coleta de dados, análise e deliberação sobre as pós-graduações _strictu sensu_, em coerência com o estabelecido no Plano Nacional de Pós-Graduação (PNPG) 2012-2020 (CAPES, 2010) e nos diversos documentos que definem os critérios de organização da pós-graduação em cada área do conhecimento (CAPES, 2018).
Leite (2018) faz uma apresentação geral  de como se organizam e são avaliadas as pós-graduações no Brasil.

O Plano Nacional de Pós-Graduação (PNPG), por outro lado, define diretrizes estratégicas para desenvolvimento da pós-graduação brasileira, que deve abordar prioritariamente grandes temas de interesse nacional, tais como a redução das assimetrias de desenvolvimento entre as regiões do Brasil, a formação de professores para a educação básica, a formação de recursos humanos para as empresas, a resposta aos grandes desafios brasileiros sobre Água, Energia, Transporte, Controle de Fronteiras, Agronegócio, Amazônia, Amazônia Azul (Mar), Saúde, Defesa, Programa Espacial, além de Justiça, Segurança Pública, Criminologia e Desequilíbrio Regional.
O PNPG também traça as diretrizes para financiamento da pós-graduação e sua internacionalização, apresentando conclusões e recomendações.

As avaliações do SNPG, ao atribuirem mensurações de desempenho às diversas pós-graduações que dele fazem parte, geram incentivos e penalidades aos programas, tendo em vista a limitada disponibilidade de recursos para investimento em bolsas, taxas de bancada etc.
Embora o sistema seja altamente sofisticado ele é também altamente criticado (Azevedo et al., 2016), sobretudo porque há percalços na busca por um equilíbrio entre as diferentes concepções de finalidade da ciência. 
Se de um lado a promoção do conhecimento gerado predominantemente nas ditas ciências _hard_ constribui para criar fluxos econômicos mais intensos, isso não significa que essa promoção possa ocorrer em detrimento da menor promoção na geração de conhecimento sobre problemas sociais, predominantemente gerado nas ditas ciências _soft_, especialmente das áreas de humanidades, sob pena de ampliação de desigualdades (Azevedo et al., 2016).

Não há solução simples, mas postula-se, nesta disciplina, que uma maior agilidade na avaliação e a utilização de critérios mais objetivos, poderá facilitar a melhoria do sistema.

###Os Colégios, Grandes Áreas e Áreas da Pós-Graduação Brasileira

A partir de 2018, as diversas áreas da pós-graduação brasileira foram organizadas na forma de colégios, grandes áreas e áreas, conforme apresentam as tabelas a seguir.

####Colégio de Ciências da vida

CIÊNCIAS AGRÁRIAS| CIÊNCIAS BIOLÓGICAS| CIÊNCIAS DA SAÚDE
-|-|-
Ciência de Alimentos |Biodiversidade |Educação Física
Ciências Agrárias I |Ciências Biológicas I |Enfermagem
Medicina Veterinária |Ciências Biológicas II |Farmácia
Zootecnia / Recursos Pesqueiros |Ciências Biológicas III |Medicina I
- |- |Medicina II
- |- |Medicina III
- |- |Nutrição
- |- |Odontologia
- |- |Saúde Coletiva


####Colégio de Ciências Exatas, Tecnológicas e Multidisciplinar

CIÊNCIAS EXATAS E DA TERRA|ENGENHARIAS|MULTIDISCIPLINAR
-|-|-
Astronomia / Física |Engenharias I |Biotecnologia
Ciência da Computação |Engenharias II |Ciências Ambientais
Geociências |Engenharias III |Ensino
Matemática / Probabilidade e Estatística |Engenharias IV |Interdisciplinar
Química | - |Materiais


####Colégio de Humanidades


CIÊNCIAS HUMANAS | CIÊNCIAS SOCIAIS APLICADAS | LINGUÍSTICA, LETRAS E ARTES
-|-|-
Antropol/Arqueol | Admin.Púb./Empr.,C.Contáb. e Tur.|Artes
Ciência Pol. e Rel. Int. |Arquit., Urban. e Design | Linguística e Literatura
Ciências da Religião e Teol. |Comunicação e Informação|-
Educação |Direito|-
Filosofia |Economia|-
Geografia |Planej. Urbano e Reg. / Demografia|-
História |Serviço Social |-
Psicologia|-|-
Sociologia|-|-

Cada um desses colégios, grandes áreas e áreas de conhecimento possuem dinâmicas próprias, e, portanto, não há um modelo universal que se aplique a todas.
Existem aspectos comuns, mas também grandes peculiaridades, descritas parcialmente nos correspondentes documentos de área disponíveis em CAPES (2018).

##A UnB dentro do Sistema Nacional de Pós-Graduação (Contextualização)

### O que é a UnB?
<p>A Universidade de Brasília é uma instituição de ensino superior composta por cinco campus em Brasília e cidades satélites que oferecem formação da graduação à pós-graduação. Do ponto de vista de sua produção científica a UnB ocupa atualmente a posição número 737 no ranking mundial de melhores universidades do mundo  de acordo com o Center for World University Rankings (CWUR), que leva em consideração principalmente premiações, artigos, número de citações, pesquisas e publicações. 
<p>Em relação às demais universidades do Brasil, segundo o Ranking de Universidades Folha (2017) que classifica as melhores universidades do país, entre as 296 instituições públicas de nível superior a UnB se encontra na posição número 20 sendo a 11ª em número de teses publicadas, a 10ª e número de publicações em revistas nacionais e a 20ª em núméro de publicações por docente.

###Descrição das pós-graduações da UnB

Neste trabalho o foco foi em três programas de pós-graduação da UNB. Entre eles dois programas do departamento de matemática e outro do programa de ensino em ciências. Nós próximos tópicos serão detalhados os contextos de cada PPG sendo trabalhado.

#### Programa de Pós-graduação de ensino em ciências

```{r init, include = FALSE}
library(jsonlite);library(tidyverse)
library(readxl);library(ggplot2)
library(XLConnect);library(stringr)
library(RColorBrewer)

setwd("~/R/Relatorio3")

ori <- fromJSON("EnsCiencias.advise.json")
pub <- fromJSON("EnsCiencias.publication.json")
```

O programa de pós-graduação em ensino de ciências, tem como objetivo qualificar os professores de nível básico em matérias relativas a ciências e afins. O foco é dado no desenvolvimento de conteúdos de ciências, o que envolve aspectos teóricos, metodológicos e epistemológicos relativo ao ensino de ciências além do desenvolvimento e aprendizado de novas tecnologias que permitam a evolução do ensino. 

O programa engloba professores com as mais diversas áreas de atuação e de diferentes cantos da universidade. Podemos citar como áreas a física, bioquímica, ecologia, história, química, genética, medicina, psicologia entre outras, com destaques para a participação do Instituto de Física, Química e Ciências Biológicas. Os programas englobam três linhas de pesquisa sendo elas: Ensino-Aprendizagem em Ciências da Natureza em seus mutilplos aspectos; Formação de Professores de Ciências da Natureza e Educação Científica e Cidadania. 

A implementação do Programa de Pós-Graduação em Ensino de Ciências na UnB, se deu inicialmente em 2007 e desde 2010, tem sido ampliado seu quadro de docentes por meio do credenciamento de novos orientadores, principalmente a partir da aproximação com o curso de Licenciatura em Ciências Naturais da Faculdade UnB Planaltina.  

O programa é composto por 19 professores que já realizaram cerca de 709 orientações ao longo dos anos de 2010 a 2017 com cerca de 174 dissertações de mestrado concluidas até o momento. Podemos observar abaixo as distribuições de cada orientação realizada ao longo dos anos. É possível observar um grande aumento na quantidade(relativa) de orientações realizadas de mestrado, o que pode ser explicado pelo aumento do número de novos orientadores credenciados ao PPG. 


```{r plot1, echo = FALSE, fig.width=8,fig.height=4}
get.ori.tipo <- function(ori, j){
  ori.df <- data.frame();
  for (i in 1:length(ori[[j]]))
    ori.df <- rbind(ori.df, ori[[c(j,i)]])
  return(ori.df)  
}

ori.df <- data.frame();
for(i in 1:length(ori))
  ori.df <- rbind(ori.df, get.ori.tipo(ori, i))

blues <- brewer.pal(7, "Greens")
blue_range <- colorRampPalette(blues) 

ori.df %>% 
  group_by(natureza,ano) %>%
  summarise(count = n()) %>%
  ggplot(aes(x = ano, y = count, fill = natureza)) + 
    geom_bar(position = "fill",stat = "identity") +
    scale_fill_manual(values = blue_range(11)) + theme_dark()
```


Abaixo teremos as quantidades absolutas totais de orientações realizadas ao longo dos anos de 2010 a 2017  apenas para complementar a distribuição acima apresentada: 

```{r plot2, echo = FALSE, warning=FALSE, fig.width=12,fig.height=4}
ori.df %>%
  group_by(natureza) %>%
  summarise(count = n()) %>% 
  arrange(desc(count)) %>% head(10) %>%
  ggplot(aes(x = natureza, y = count, fill = natureza)) +
  geom_bar(position = "stack", stat = "identity") +
  geom_text(aes(label=count), hjust = -0.5, size = 3.5) +
  coord_flip() + 
  theme(legend.position = "none")
```
 

Em média os orientadores possuem nível de senioridade 7, tendo 5 como mínimo e 9 como máximo, o que indica que no geral os professores possuem bastante experiência no meio acadêmico, e pode ser relevante para explicar a quantidade de orientações realizadas pelo programa e também o número de publicações realizadas. No total os orientadores participam de 29 grupos de pesquisa e são em sua totalidade nascidos no brasil com uma idade média de 58 anos de idade.  Entre os grupos aos quais os orientadores participam podemos citar os de Educação Científica e Cidadania, Ensino de Ciências e Mediação Pedagógica, Aprendizagem e mediação pedagógica, Ecologia e Comportamento e o grupo de Ensino de Química. 

Atualmente estão sendo realizadas 74 orientações que incluem, mestrandos, doutorandos e PHDs. Deste conjunto existem alunos que vieram de diversas instituições, dentre elas Universidade Federal de Mato Grosso, Universidade Federal de Pernambuco, Universidade Federal de Sergipe e Centro Universitário Norte do Espírito Santo, porém nenhum estudante proveniente de instituições internacionais. 

#### Programas de Pós-graduação da Matemática

Aqui será feita uma contextualização das áreas de pesquisa relacionadas ao programa de Pós-Graduação em Matemática da UnB, dos anos 2010 à 2017. Para tal está sendo apresentado dados de produção científica dos docentes do programa, retirados do currículo Lattes dos professores e do repositório `OASIS` do `IBICT` (Instituto Brasileiro de Informação em Ciência e Tecnologia). 

O coordenador do PPG é o Carlos Alberto Pereira dos Santos e as subáreas de concentração são: **Álgebra, Análise, Geometria e Matemática Aplicada**. Mais informações do programa podem ser acessadas pelo site [sucupira](https://sucupira.capes.gov.br/sucupira/public/consultas/coleta/programa/viewPrograma.jsf?popup=true&cd_programa=53001010003P2).

O programa de Pós-Graduação em Matemática da UnB, iniciado em 1962, oferece Mestrado e Doutorado em Matemática nas subáreas de Álgebra, Análise, Geometria e Matemática Aplicada (Probabilidade, Física-Matemática e Computação). O corpo docente mantém um programa ativo de pesquisa, participa regular e ativamente de forma destacada em reuniões científicas e em corpos editoriais de revistas científicas, além de manter intercâmbio científico com diversas instituições do país e do exterior. 

Há também um programa de mestrado profissional `PROFMAT`, que é um programa de pós-graduação stricto sensu em Matemática, reconhecido pelo Ministério da Educação e conduzindo ao título de Mestre. Tem como objetivo proporcionar formação matemática aprofundada relevante ao exercício da docência no Ensino Básico, visando dar ao egresso a qualificação certificada para o exercício da profissão de professor de Matemática.

O `PROFMAT` é um curso semipresencial ministrado por Instituições de Ensino Superior associadas em uma Rede Nacional, no âmbito do **Sistema Universidade Aberta do Brasil** (UAB). É coordenado pela Comissão Acadêmica Nacional, que opera sob a égide da Diretoria da **Sociedade Brasileira de Matemática** (SBM).

As Instituições de Ensino Superior que integram a Rede Nacional do `PROFMAT` são denominadas Instituições Associadas e são responsáveis, por intermédio das respectivas Coordenações Acadêmicas Institucionais, por toda a gestão local do `PROFMAT`, descritas no Regimento. Informações completas sobre este mestrado podem ser encontradas na página do [`PROFMAT`](http://www.profmat-sbm.org.br). Na Universidade de Brasília este curso é ofertado no âmbito do Instituto de Ciências Exatas, Departamento de Matemática.

O Departamento de Matemática da UnB obteve nota 7 na última avaliação trienal da Capes. Essa avaliação de excelência é o resultado de um longo, árduo e contínuo trabalho iniciado em 1962 por professores/colaboradores corajosos e idealistas que acreditaram em tornar o sonho do Departamento de Matemática da Universidade de Brasília uma realidade. Desde então, esse ideal vem sendo fortalecido com a chegada de novos professores/colaboradores que conduziram este programa ao reconhecimento da sua excelência.

#CRISP-DM Fase 2 - Entendimento dos Dados

##CRISP-DM Fase.Atividade 2.1 - Coleta inicial dos dados
Todos os arquivos com dados iniciais a seguir apresentados foram fornecidos pelos professores responsáveis pela disciplina. Os dados foram gerados no mês de maio de 2018, e compilam informações entre os anos de 2010 e 2017. 
Os arquivos estão no formato JSON, e seus atributos iniciais e conteúdos são apresentados a seguir.

###Perfil profissional dos docentes vinculados às pós-graduações

```{r}
json.perfil <- "Matematica.profile.json"
file.info(json.perfil)
```

O arquivo `r json.perfil` apresenta dados sobre o perfil de todos os docentes vinculados a programas de pós-graduação da UnB, entre 2010 e 2017. 
Esse arquivo foi fornecido pelos docentes responsáveis pela disciplina.

###Orientações de mestrado e doutorado realizadas pelos docentes vinculados às pós-graduações

```{r}
json.advise <- "Matematica.advise.json"
file.info(json.advise)
```

O arquivo `r json.advise` apresenta dados sobre o orientações de mestrado e doutorado feitas por todos os docentes vinculados a programas de pós-graduação da UnB, entre 2010 e 2017. 
Esse arquivo foi fornecido pelos docentes responsáveis pela disciplina.


###Produção bibliográfica gerada pelos docentes vinculados às pós-graduações

```{r}
json.producao.bibliografica <- "Matematica.publication.json"
file.info(json.producao.bibliografica) 
```

O arquivo `r json.producao.bibliografica` apresenta dados sobre a produção bibliográfica gerada por todos os docentes vinculados a programas de pós-graduação da UnB, entre 2010 e 2017. 

###Agrupamento dos docentes conforme áreas de atuação

```{r}
json.researchers_by_area <- "Matematica.researchers_by_area.json" 
file.info(json.researchers_by_area)
```

O arquivo `r json.researchers_by_area` apresenta as vinculações de todos os docentes que declararam atuar em cada uma das áreas de pós-graduação do Sistema Nacional de Pós-Graduação da CAPES, conforme apresenta-se registrada essa informação no currículo Lattes de cada um, em data recente. 

```{r}
file.info('Matematica.graph.json')
```

##CRISP-DM Fase.Atividade 2.2 - Descrição dos Dados

Para ler e manipular inicialmente esses dados, serão usadas primordialmente as bibliotecas seguintes 

```{r library-load, warnings = FALSE}
library(jsonlite)
library(listviewer)
library(readxl)
library(readr)
#library(readtext)
library(ggplot2)
suppressMessages(library("tidyverse"))
```

Como já informado, a descrição dos dados verifica se os dados sendo acessados terão potencial para responder às questões de _data mining_. Além disso, deve-se avaliar qual o volume de dados, a estrutura dos dados (tipos), codificações usadas, etc. Neste projeto, a descrição dos dados é responsabilidade parcial dos alunos, tendo em vista que esta seção já oferece uma descrição inicial simplificada. O relatório final deve conter descrições significativas e aprofundadas dos dados.

###Descrição dos dados do perfil

O arquivo unb.perfis.json, que contém dados que caracterizam o perfil profissional de todos os docentes do grupo sob análise, podem ser lido por meio do comando seguinte.

```{r}
unb.prof <- fromJSON("Matematica.profile.json")
```

A quantidade de docentes sob análise é apresentada a seguir.
```{r}
length(unb.prof)
```

Para gerar uma apresentação inicial dos dados que estão contido nos dados de perfil dos docentes, pode-se usar a função glimpse, da biblioteca dplyr, como ilustra o código seguinte, que apresenta os atributos típicos que podem ser obtidos relativamente a um pesquisador específico, o mais antigo docente ainda em exercício na UnB a ter criado seu registro na plataforma Lattes.

```{r}
library(dplyr) 
glimpse(unb.prof[[1]], width = 30)
```

Uma breve inspeção visual dos atributos anteriormente apresentados permite inferir que o pesquisador sob análise:

* Atua predominantemente na área de matemática.
* Trabalha no Instituto de Ciências Exatas da UnB.
* Possui três artigos recentes publicados, além de um aceito para publicação.
* Possui uma orientação de doutorado em andamento, iniciada em 2014.
* Foi classificado com senioridade 5.

###Descrição dos dados de orientações

```{r}
unb.adv <- fromJSON("Matematica.advise.json")
names(unb.adv)
names(unb.adv$ORIENTACAO_CONCLUIDA_DOUTORADO)
length(unb.adv$ORIENTACAO_CONCLUIDA_DOUTORADO$`2016`$natureza)
head(sort(table(unb.adv$ORIENTACAO_CONCLUIDA_DOUTORADO$`2017`$curso), decreasing = TRUE), 10)
head(sort(table(unb.adv$ORIENTACAO_CONCLUIDA_MESTRADO$`2017`$curso), decreasing = TRUE), 10)
```


###Descrição dos dados de produção bibliográfica
```{r}
unb.pub <- fromJSON("Matematica.publication.json")
names(unb.pub)
names(unb.pub$PERIODICO$`2012`)
head(sort(table(unb.pub$PERIODICO$`2017`$periodico), decreasing = TRUE), 10)
head(sort(table(unb.pub$LIVRO$`2015`$nome_da_editora), decreasing = TRUE), 10)
```


###Descrição dos dados de agregação de docentes por área
```{r}
unb.area <- fromJSON("Matematica.researchers_by_area.json")
unb.area.df <- cbind(names(unb.area$`Areas dos pesquisadores`),
           (sapply(unb.area$`Areas dos pesquisadores`, function(x) length(x))))
rownames(unb.area.df) <- c(1:nrow(unb.area.df)); colnames(unb.area.df) <- c("Area", "Professores")
glimpse(unb.area.df)
head(unb.area.df[])
```


###Descrição dos dados de redes de colaboração


##CRISP-DM Fase.Atividade 2.3 - Análise exploratória dos dados

Como já informado, a análise exploratória dos dados possibilita um entendimento mais profundo da relação estatística existente entre os dados dos _datasets_ para um melhor entendimento da qualidade daqueles dados para os objetivos do projeto. 

###Arquivo Profile

```{r}
# jsonedit(unb.prof)
# Número de áreas de atuação cumulativo
sum(sapply(unb.prof, function(x) nrow(x$areas_de_atuacao)))
# Número de áreas de atuação por pessoa
table(unlist(sapply(unb.prof, function(x) nrow(x$areas_de_atuacao))))
# Número de pessoas por grande area
table(unlist(sapply(unb.prof, function(x) (x$areas_de_atuacao$grande_area))))
# Número de pessoas que produziram os específicos tipos de produção
table(unlist(sapply(unb.prof, function(x) names(x$producao_bibiografica))))
# Número de publicações por tipo
sum(sapply(unb.prof, function(x) length(x$producao_bibiografica$ARTIGO_ACEITO$ano)))
sum(sapply(unb.prof, function(x) length(x$producao_bibiografica$CAPITULO_DE_LIVRO$ano)))
sum(sapply(unb.prof, function(x) length(x$producao_bibiografica$LIVRO$ano)))
sum(sapply(unb.prof, function(x) length(x$producao_bibiografica$PERIODICO$ano)))
sum(sapply(unb.prof, function(x) length(x$producao_bibiografica$TEXTO_EM_JORNAIS$ano)))
# Número de pessoas por quantitativo de produções por pessoa 0 = 1; 1 = 2...
table(unlist(sapply(unb.prof, function(x) length(x$producao_bibiografica$ARTIGO_ACEITO$ano))))
table(unlist(sapply(unb.prof, function(x) length(x$producao_bibiografica$CAPITULO_DE_LIVRO$ano))))
table(unlist(sapply(unb.prof, function(x) length(x$producao_bibiografica$LIVRO$ano))))
table(unlist(sapply(unb.prof, function(x) length(x$producao_bibiografica$PERIODICO$ano))))
table(unlist(sapply(unb.prof, function(x) length(x$producao_bibiografica$TEXTO_EM_JORNAIS$ano))))
# Número de produções por ano
table(unlist(sapply(unb.prof, function(x) (x$producao_bibiografica$ARTIGO_ACEITO$ano))))
table(unlist(sapply(unb.prof, function(x) (x$producao_bibiografica$CAPITULO_DE_LIVRO$ano))))
table(unlist(sapply(unb.prof, function(x) (x$producao_bibiografica$LIVRO$ano))))
table(unlist(sapply(unb.prof, function(x) (x$producao_bibiografica$PERIODICO$ano))))
table(unlist(sapply(unb.prof, function(x) (x$producao_bibiografica$TEXTO_EM_JORNAIS$ano))))
# Número de pessoas que realizaram diferentes tipos de orientações
length(unlist(sapply(unb.prof, function(x) names(x$orientacoes_academicas))))
# Número de pessoas por tipo de orientação
table(unlist(sapply(unb.prof, function(x) names(x$orientacoes_academicas))))
#Número de orientações concluidas
sum(sapply(unb.prof, function(x) length(x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_MESTRADO$ano)))
sum(sapply(unb.prof, function(x) length(x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_DOUTORADO$ano)))
sum(sapply(unb.prof, function(x) length(x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_POS_DOUTORADO$ano)))

# Número de pessoas por quantitativo de orientações por pessoa 0 = 1; 1 = 2...
table(unlist(sapply(unb.prof, function(x) length(x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_MESTRADO$ano))))
table(unlist(sapply(unb.prof, function(x) length(x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_DOUTORADO$ano))))
table(unlist(sapply(unb.prof, function(x) length(x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_POS_DOUTORADO$ano))))

# Número de orientações por ano
table(unlist(sapply(unb.prof, function(x) (x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_MESTRADO$ano))))
table(unlist(sapply(unb.prof, function(x) (x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_DOUTORADO$ano))))
table(unlist(sapply(unb.prof, function(x) (x$orientacoes_academicas$ORIENTACAO_CONCLUIDA_POS_DOUTORADO$ano))))

```

###Arquivo Publicação
```{r}
# Visualizar a estrutura do arquivo de Publicacao
#jsonedit(unb.pub)
#Criando um data-frame com todos os anos
unb.pub.df <- data.frame()
for (i in 1:length(unb.pub[[1]]))
  unb.pub.df <- rbind(unb.pub.df, unb.pub$PERIODICO[[i]])
glimpse(unb.pub.df)
# Limpando o data-frame de listas
unb.pub.df$autores <- gsub("\",\"|\", \"", "; ", unb.pub.df$autores)
unb.pub.df$autores <- gsub("\"|c\\(|\\)", "", unb.pub.df$autores)
unb.pub.df$`autores-endogeno` <- gsub(",", ";", unb.pub.df$`autores-endogeno`)
unb.pub.df$`autores-endogeno` <- gsub("\"|c\\(|\\)", "", unb.pub.df$`autores-endogeno`)
glimpse(unb.pub.df)

```

###Arquivo Orientação
```{r}
#Orientação
#Visualizar a estrutura do json no painel Viewer
#jsonedit(unb.adv)
#Reunir todos os anos e orientações concluidas em um mesmo data-frame
unb.adv.tipo.df <- data.frame(); unb.adv.df <- data.frame()
for (i in 1:length(unb.adv[[1]]))
  unb.adv.tipo.df <- rbind(unb.adv.tipo.df, unb.adv$ORIENTACAO_CONCLUIDA_POS_DOUTORADO[[i]])
unb.adv.df <- rbind(unb.adv.df, unb.adv.tipo.df); unb.adv.tipo.df <- data.frame()
for (i in 1:length(unb.adv[[1]]))
  unb.adv.tipo.df <- rbind(unb.adv.tipo.df, unb.adv$ORIENTACAO_CONCLUIDA_DOUTORADO[[i]])
unb.adv.df <- rbind(unb.adv.df, unb.adv.tipo.df); unb.adv.tipo.df <- data.frame()
for (i in 1:length(unb.adv[[1]]))
  unb.adv.tipo.df <- rbind(unb.adv.tipo.df, unb.adv$ORIENTACAO_CONCLUIDA_MESTRADO[[i]])
unb.adv.df <- rbind(unb.adv.df, unb.adv.tipo.df)
glimpse(unb.adv.df)
#Transformar as colunas de listas em caracteres eliminando c("")
unb.adv.df$nome_orientadores <- gsub("\"|c\\(|\\)", "", unb.adv.df$nome_orientadores)
unb.adv.df$id_lattes_orientadores <- gsub("\"|c\\(|\\)", "", unb.adv.df$id_lattes_orientadores)
#Separar as colunas com dois orientadores
unb.adv.df <- separate(unb.adv.df, nome_orientadores, into = c("ori1", "ori2"), sep = ",")
unb.adv.df <- separate(unb.adv.df, id_lattes_orientadores, into = c("idLattes1", "idLattes2"), sep = ",")
#Numero de orientacoes por ano
table(unb.adv.df$ano)
#Tabela com nome de professor e numero de orientacoes
head(sort(table(rbind(unb.adv.df$ori1, unb.adv.df$ori2)), decreasing = TRUE), 20)
```


#CRISP-DM Fase 3 -  __Preparação dos Dados__

Como já informado, na fase de __Preparação dos Dados__ os _datasets_ que serão utilizados em todo o trabalho são construídos a partir dos dados brutos. Aqui os dados são “filtrados” retirando-se partes que não interessam e selecionando-se os “campos” necessários para o trabalho de mineração. 

##CRISP-DM Fase.Atividade 3.1 - Construção dos dados

Como já informado, a construção dos dados envolve a criação de novas variáveis a partir de outras presentes nos _datasets_.
```{r}
# Funcoes 

# converte as colunas de um dataframe tipo lista em tipo character
cv_tplista2tpchar <- function( df  ) { 
  for( variavel in names(df)) {
    if (class(df[[variavel]]) == "list" ) {
      df[[variavel]] <- lapply(df[[variavel]] ,   function(x)   lista2texto( x  ) ) 
      df[[variavel]] <- as.character( df[[variavel]] )
    }
  }
  return(df)
}
###


# converte o conteudo de lista em array de characters
lista2texto <- function( lista  ) {
  if(is.null(lista)) {
    return ( NULL )
  }
  saida <- ""
  for( j in 1:length(lista)) { 
    for( i in 1:length(lista[[j]]) ) {
      elemento <- lista[[j]][i] 
      if( !is.null(elemento)) { 
        if( i == length(lista[[j]]) & j == length(lista)  ) { 
          # se for o ultimo elemento nao coloque o ponto e virgula no final            
          saida <- paste0( saida , elemento  )
        } else {
          # enquanto nao for o ultimo coloque ; separando os elementos concatenados 
          saida <- paste0( saida , elemento , sep = " ; ")
        }
      }  
    }
  }
  return( saida )
}

# Converte producao elattes separada por anos em um unico dataframe 
converte_producao2dataframe<- function( lista_producao ) {
  df_saida <- NULL 
  
  for( ano in names(lista_producao)) {
    df_saida <- rbind(df_saida , lista_producao[[ano]])
  }
  
  # converte tipo lista em array de character 
  df_saida <- cv_tplista2tpchar(df_saida)
  return(df_saida)
  

}

#concatena dois dataframes com  colunas diferentes 
concatenadf <- function( df1, df2) { 
  #cria colunas de df1 que faltam em df2
  for( coluna in names(df1 ) ) {
    if( !is.element(coluna, names(df2) )) {
      df2[coluna] <- NA
    }
  }
  
  #cria colunas de df2 que faltam em df1  
  for( coluna in names(df2 ) ) {
    
    if( !is.element(coluna, names(df1) )) {
      df1[coluna] <- NA
    }
  }
  
  
  #faz o rbind dos dois dataframes 
  df_final <- rbind(df1 , df2)
  return(df_final)
  
}

# Extracao dos perfis dos professores 

extrai_1perfil <- function( professor ) {
  idLattes <- names(professor)
  nome <- professor[[idLattes]]$nome   
  resumo_cv <- professor[[idLattes]]$resumo_cv 
  endereco_profissional <- professor[[idLattes]]$endereco_profissional #list 
  instituicao <- endereco_profissional$instituicao
  orgao <- endereco_profissional$orgao
  unidade <- endereco_profissional$unidade
  DDD <- endereco_profissional$DDD
  telefone <- endereco_profissional$telefone
  bairro <- endereco_profissional$bairro
  cep <- endereco_profissional$cep
  cidade <- endereco_profissional$cidade
  senioridade <- professor[[idLattes]]$senioridade  
  df_1perfil <- data.frame( idLattes , nome, resumo_cv ,instituicao , 
                           orgao, unidade , DDD, telefone, bairro,cep,cidade , senioridade,
                           stringsAsFactors = FALSE)
  
  return(df_1perfil)  
}

extrai_perfis <- function(jsonProfessores) {
  df_saida <- data.frame()
  for( i in 1:length(jsonProfessores)) {
    jsonProfessor <- jsonProfessores[i]
    df_professor <- extrai_1perfil(jsonProfessor)
    if( nrow(df_saida) > 0 ) {
      df_saida <- rbind(df_saida , df_professor)
    } else {
      df_saida <- df_professor 
    }
  }
   
  return(df_saida)
}

# Extracao da producao bibliografica dos professores 

extrai_1producao <- function(professor) {
  idLattes <- names(professor)
  df_1producao <<- NULL 
  producao_bibliografica <- professor[[idLattes]]$producao_bibiografica  #list
  for( tipo_producao in names(producao_bibliografica)) { 
    df_temporario <- cv_tplista2tpchar ( producao_bibliografica[[tipo_producao]]) 
    df_temporario$tipo_producao <-  tipo_producao 
    df_temporario$idLattes <-  idLattes
    df_1producao <- concatenadf( df_1producao , df_temporario  )
  }  
  return(df_1producao)
}

extrai_producoes <- function( jsonProfessores) {
  df_saida <- data.frame()
  for( i in 1:length(jsonProfessores)) {
    jsonProfessor <- jsonProfessores[i]
    df_producao <- extrai_1producao(jsonProfessor)
    if( nrow(df_saida) > 0 ) {
      df_saida <- concatenadf(df_saida , df_producao)
    } else {
      df_saida <- df_producao 
    }
  }
  df_saida <- df_saida %>% filter( !is.na(tipo_producao))
  return(df_saida)  
}

# Extracao das orientacoes dos professores 

extrai_1orientacao <- function(professor) {
  idLattes <- names(professor)
  df_1orientacao <- NULL
  orientacoes_academicas  <- professor[[idLattes]]$orientacoes_academicas  #list
  for( orientacao in names(orientacoes_academicas )) { 
    df_temporario <- cv_tplista2tpchar ( orientacoes_academicas[[orientacao]])
    df_temporario$orientacao <-  orientacao 
    df_temporario$idLattes <-  idLattes
    df_1orientacao <- concatenadf( df_1orientacao , df_temporario  )
  }  
  return(df_1orientacao) 
}

extrai_orientacoes <- function(jsonProfessores) {
  df_saida <- data.frame()
  for( i in 1:length(jsonProfessores)) {
    jsonProfessor <- jsonProfessores[i]
    df_orientacao <- extrai_1orientacao(jsonProfessor)
    if( nrow(df_saida) > 0 ) {
      df_saida <- concatenadf(df_saida , df_orientacao)
    } else {
      df_saida <- df_orientacao
    }
  }
  df_saida <- df_saida %>% filter(!is.na(idLattes))
  return(df_saida)  
}

# Extracao das areas de atuacao dos professores 

extrai_1area_de_atuacao <- function(professor){
  idLattes <- names(professor)
  df_1area <-  professor[[idLattes]]$areas_de_atuacao
  df_1area$idLattes <- idLattes
  return(df_1area)
}

extrai_areas_atuacao <- function(jsonProfessores){
  df_saida <- data.frame()
  for( i in 1:length(jsonProfessores)) {
    jsonProfessor <- jsonProfessores[i]
    df_area_atuacao <- extrai_1area_de_atuacao(jsonProfessor)
    if( nrow(df_saida) > 0 ) {
      df_saida <- concatenadf(df_saida , df_area_atuacao)
    } else {
      df_saida <- df_area_atuacao
    }
  }
  df_saida <- df_saida %>% filter( !is.na(idLattes))
  return(df_saida)   
}
########################### Inicio 

# colocar o diretorio onde está o arquivo json de perfis a serem lidos 
unb.prof.json <- read_file("Matematica.profile.json")
# unb.prof.df.capes <- read.csv("data/PesqPosCapes.csv", 
#                               sep = ";", header = TRUE, colClasses = "character")
unb.prof <- fromJSON(unb.prof.json)
length(unb.prof)

# extrai perfis dos professores 
unb.prof.df.professores <- extrai_perfis(unb.prof)

# extrai producao bibliografica de todos os professores 
unb.prof.df.publicacoes <- extrai_producoes(unb.prof)

#extrai orientacoes 
unb.prof.df.orientacoes <- extrai_orientacoes(unb.prof)

#extrai areas de atuacao 
unb.prof.df.areas.de.atuacao <- extrai_areas_atuacao(unb.prof)

#salva os daframes 
# save(unb.prof.df.professores, unb.prof.df.publicacoes,
#      unb.prof.df.orientacoes, unb.prof.df.areas.de.atuacao, file = "dataframes.Rda")

#cria arquivo para análise
# unb.prof.df <- data.frame()
# unb.prof.df <- unb.prof.df.professores %>% 
#   select(idLattes, nome, resumo_cv, senioridade) %>% 
#   left_join(
#     unb.prof.df.orientacoes %>% 
#       select(orientacao, idLattes) %>% 
#       filter(!grepl("EM_ANDAMENTO", orientacao)) %>% 
#       group_by(idLattes) %>% 
#       count(orientacao) %>% 
#       spread(key = orientacao, value = n), 
#     by = "idLattes") %>% 
#   left_join(
#     unb.prof.df.publicacoes %>% 
#       select(tipo_producao, idLattes) %>% 
#       filter(!grepl("ARTIGO_ACEITO", tipo_producao)) %>% 
#       group_by(idLattes) %>% 
#       count(tipo_producao) %>% 
#       spread(key = tipo_producao, value = n), 
#     by = "idLattes") %>% 
#   left_join(
#     unb.prof.df.areas.de.atuacao %>% 
#       select(area, idLattes) %>% 
#       group_by(idLattes) %>% 
#       summarise(n_distinct(area)), 
#     by = "idLattes") %>% 
#   left_join(
#     unb.prof.df.capes %>% 
#       select(AreaPos, idLattes) %>% 
#       group_by(idLattes) %>% 
#       summarise(n_distinct(AreaPos)), 
#     by = "idLattes")

# glimpse(unb.prof.df)
```

#CRISP-DM Fase.Atividade 4 - Avaliação dados qualitativos e quantitativos

##Orientações do PPG de Ensino Ciências

Como foi dito o foco da análise será nas publicações realizadas pelo programa. Os tipos de publicações envolvem periódicos, livros, capítulos de livros, textos em jornais, eventos, artigos e outras demais publicações. Abaixo teremos as quantidades totais de registros no conjunto de dados obtidos: 

```{r plot3, echo = FALSE, fig.width=8,fig.height=5}
ori.c = c(
  "PERIODICOS" = 1,
  "LIVROS" = 2,
  "CAP_LIVROS" = 3,
  "TEXT_JORNAIS" = 4,
  "EVENTOS" = 5,
  "ARTIGOS" = 6,
  "DEMAIS" = 7
)

ori.names = c(
  "PERIODICOS",
  "LIVROS",
  "CAP_LIVROS",
  "TEXT_JORNAIS",
  "EVENTOS",
  "ARTIGOS",
  "DEMAIS"
)

pub.list.df <- list()
for(j in 1:length(pub)){
  pub.df <- data.frame();
  
  for(i in 1:length(pub[[j]]))
    pub.df <- rbind(pub.df, pub[[c(j,i)]])
  pub.df$ano <- as.numeric(pub.df$ano)
  pub.list.df[[j]] <- pub.df
}

pub.types <- as.data.frame(names(pub))
names(pub.types) <- c("type")
pub.types <- cbind(pub.types, sapply(pub.list.df, function(x){return(length(x[,1]))}))
names(pub.types) <- c("type", "count")


ggplot(pub.types, aes(x="", y= count, fill=type)) +
  geom_bar(width = 1, stat = "identity")+ 
  geom_text(aes(label = paste0(round(count), "")), 
            position = position_stack(vjust = 0.5)) +
  coord_polar("y")+
  theme_void()
```
 

As maiores quantidades observadas são de participações em periódicos e de eventos sejam eles internacionais ou nacionais. Participações em eventos geralmente evidenciam algum tipo de engajamento dos pesquisadores com as comunidades externas a universidade e podem trazer informações importantes sobre o quanto determinado departamento da UNB influencia ou é influenciado por outras comunidades. A seguir teremos as quantidades especificadas de participações em eventos: 

```{r plot4, echo = FALSE, fig.width=7,fig.height=4}
pub.list.df[[ori.c["EVENTOS"]]] %>%
  group_by(pais_do_evento, ano) %>%
    ggplot(aes(x = ano, y = pais_do_evento, col = pais_do_evento)) +
    geom_point() + geom_jitter()
```

Como pode-se notar a maior quantidade de participações são de eventos nacionais, com destaque também para participações em Portugal e na Espanha, o que indica que o departamento tende a se relacionar majoritariamente com países que não possuam grandes barreiras línguisticas em relação ao português do Brasil.  

Ao analisar as publicações realizadas pelo programa também podemos notar que em sua grande maioria são focadas em periódicos nacionais o que fortalece a ideia de que o departamento tende a manter sua influência apenas dentro do país. Isto poderia ser explicado pelo fato de que as áreas de pesquisa do programa são mais aplicáveis ou fazem mais sentido em um contexto brasileiro, talvez por questões culturais ou até mesmo porque o ensino sempre deve ser algo particular de uma população (o que é o foco do PPG). Abaixo podemos observar os dez periódicos em que ocorreram mais publicações pelo programa: 

```{r plot5, echo = FALSE, fig.width=10,fig.height=3}
pub.list.df[[ori.c["PERIODICOS"]]] %>%
  group_by(periodico) %>%
  summarise(count = n()) %>% 
  arrange(desc(count)) %>% head(10) %>%
  ggplot(aes(x = periodico, y = count, col = periodico)) +
    geom_bar(position = "stack", stat = "identity") +
    geom_text(aes(label=count), hjust = -0.5, size = 3.5) +
    coord_flip() + 
    theme(legend.position = "none")
```

Apenas para medir a relevância dos periódicos publicados foram verificados os qualis a partir da plataforma sucupira e foram identificados para os periódicos acima citados as classificações B5, B2, B4, B1 e C que definem um nível de relevância médio, Outro aspecto importante de se avaliar são as parcerias que estes orientadores realizam, podemos avaliar por exemplo a quantidade de autores associada a uma mesma publicação de um periódico e observar se obtemos mais publicações solo ou publicações conjuntas e determinar o grau de colaboração entre os profissionais. 

```{r plot6, echo = FALSE, fig.width=10,fig.height=4}
pub.count <- sapply(pub.list.df[[ori.c["PERIODICOS"]]]$autores, function(x){
  return(length(x))
}) %>% as.data.frame()
names(pub.count) <- c("colaboradores")
pub.count %>% 
  group_by(colaboradores) %>%
  summarise(total = n()) %>%  
  ggplot(aes(x = colaboradores, y = total, fill = colaboradores)) +
  geom_bar(position = "stack",stat = "identity") + 
  geom_text(aes(label=total), vjust = -0.3, size = 3.5)
```

O gráfico acima mostra que em sua grande maioria as publicações em periódicos envolvem 2 ou 3 pesquisadores e a maior parte da distribuição se concentra em colaborações de 2 a 6 pesquisadores. Isto mostra que o programa possui um forte grau de colaboração entre seus pesquisadores e juntamente com a quantidade de grupos de pesquisa podemos dizer que o departamento possui um bom engajamento com relação a produção acadêmica sendo realizada na universidade. 

Com relações aos outros tipos de publicações temos um volume de dados menor a serem considerados mas vale a pena também analisa-los de alguma forma. Com relação a publicação de livros, temos no total 27 publicações todas realizadas para o Brasil, o que evidencia a tendência observada anteriormente de que o foco do programa é em território nacional. No total existe uma média de 208 páginas por livro e as publicações são realizadas em colaborações em sua maioria de 2 e 8 escritores, o que também evidencia o caráter colaborativo do programa, sendo que grande parte das publicações foram realizadas em 2010 e 2013 com 7 publicações e 8 respectivamente. 

Para propósitos mais gerais podemos analisar se existe alguma tendência em relação a quantidade de cada tipo de produção realizada ao longo do tempo pelo PPG. É de se esperar que as quantidades absolutas apresentem um aumento com relação ao tempo, uma vez que o departamento apresentou uma expansão de seu quadro de docentes em 2010. Também é importante que sejam analisadas as distribuições do que é produzido uma vez que isto pode revelar algum tipo de influência externa aos pesquisadores, como por exemplo um grande evento em que ocorrerão mais publicações ou algum período de crise em que as verbas de pesquisas foram cortadas. Abaixo seguem os modelos de regressão que apresentam as tendências para cada tipo de produção: 

```{r plot7, echo = FALSE, fig.width=12,fig.height=4}
livro.count <- sapply(pub.list.df[[ori.c["LIVROS"]]]$autores, function(x){
  return(length(x))
}) %>% as.data.frame()

types.by.year <- data.frame()
for(i in 1:length(pub.list.df)){
  types.by.year <- pub.list.df[[i]] %>%group_by(ano) %>%summarise(count = n()) %>%
    cbind("type"=c(ori.names[i])) %>% rbind(types.by.year)
}

types.by.year %>%
  ggplot(aes(x = ano, y = count, col = type))+
  geom_point() + 
  geom_smooth(se =FALSE ,method = "lm", span = 0.7)+
  facet_grid(. ~ type)
```

Como podemos notar, a quantidade de participações em eventos veio decrescendo nos últimos anos, talvez devido a cortes recentes em verbas acadêmicas que podem estar fortemente associadas a crise em que o país vem vivendo nos últimos anos. Já as participações em periódicos demostraram um aumento considerável o que pode também estar associado a diminuição de participações em eventos. Para os demais tipos de publicações não existe uma tendência clara uma vez que os mesmos se apresentaram relativamente constantes nos últimos 7 anos. 

##AQUI VAI O DO RAFAEL

##AQUI VAI O DO PAULO
<p>
O dataset MatematicaRedeResearchers.json contém todas as áreas em que existem algum tipo de produção científica, a nível de pós-graduação, produzida ou em produção até 2017 por membros do Departamento de Matemática. Como é possível notar os temas desenvolvidos não são exculivamente da Matemática ou ainda das Ciências Exatas, existe uma flexibilização que permite ao pesquisador trabalhar em diferentes campos do saber. Outro dado interessante é o desenvolvimento de trabalhos na área da educação o que valida as informações apresentadas no site do departamento onde são apresentados diversos projetos nesse âmbito.
</p>
<ul>
<li>print(administração)</li>
<li>## [1] 1</li>
<li>print(educação)</li>
<li>## [1] 4</li>
<li>print(engBioMédica)</li>
<li>## [1] 1</li>
<li>print(matemática)</li>
<li>## [1] 26</li>
<li>print(ProbeEstat)</li>
<li>## [1] 2</li>
<li>print(Psicologia)</li>
<li>## [1] 2</li>
</ul>

Visando aprofundar as análises será dado foco ao grupo de quatro pesquisadores do Departamento de Matemática que desenvolveram trabalhos na área da Psicologia. Estes podem ser identifados pelo número de seu ID do Currículo Lattes, como já é conhecido temos dois resultados:

```{r echo=FALSE, message=FALSE, warning=FALSE}

perfil <- fromJSON("MatematicaRede.profile.json")
area_pesquisas <- fromJSON("MatematicaRede.researchers_by_area.json")
advise <- fromJSON("MatematicaRede.advise.json")
perfil <- fromJSON("MatematicaRede.profile.json")
str(area_pesquisas$`Areas dos pesquisadores`$Psicologia)
```
</p>
<p>
De posse dos IDs é possível fazer algumas observações, para tal foi adicionado o dataset MatematicaRede.profile.json que contém o perfil Lattes de todos os membros do departamento. De posse dessas informações é possível comprovar a existência dos pesquisadores com os ID que foram encontrados e ainda verificar se eles, mesmo sendo "nativos" da Matemática, possuem alguma pesquisa na área da Psicologia olhando suas áreas de atuação: 
```{r}
str(pesq1 <- data_frame(perfil$`0556476746202406`$areas_de_atuacao$area))
str(pesq2 <- data_frame(perfil$`5874654544324539`$areas_de_atuacao$area))
```
</p>
<p>
Ainda sobre as áreas de pesquisa é possível notar, como talvez já fosse esperado, que as sub-áreas da Matemáticas são majoritariamente as mais buscadas para desenvolvimento de pesquisas e isso pode ser verificado no gráfico a seguir que mostra a distribuição das pesquisas por área e diante do número pode-se afirmar que as sub-áres da Matemática são as de maior interesse e por consequência possuem os **resultados mais relevantes**.
```{r echo=FALSE, message=FALSE, warning=FALSE, paged.print=FALSE}

areas <- c(1,4,1,26,2,2)
names(areas) <- c("Adm", "Educ", "EBioM", "Mat", "Probb&Est", "Psi")

porc<-round(areas*100/sum(areas),2) #arredonda a porcentagem para 2 dígitos significativos)
rotulos<-paste("(",porc,"%)",sep="")
rotulos<-paste(names(areas),"(",porc,"%)",sep="")
pie(areas, main="Áreas de Pesquisa dentro do MAT", labels=rotulos, col=rainbow(7))

```
</p>
<p>
Limitando o escopo de análise aos pesquisadores que se dedicaram à pesquisas envolvendo temas da Psicologia é interessante analisar que se em algum momento antes de adquirirem seus títulos eles se dedicaram de alguma forma ao estudo da Psicologia. Para isso é feita uma análise dos resumos dos seus currículos Lattes. Devido
```{r}
resumo_pesq1 <- (perfil$`0556476746202406`$resumo_cv )
resumo_pesq2 <- (perfil$`5874654544324539`$resumo_cv)
resumo_pesq1
resumo_pesq2
```
<p>
Outro dado interessante é analisar o nível de internacionalização das produções dos pesquisadores, isso pode ser analisado com a quantidade de participações em eventos internacionais e nacionais.Como é possível ver através dos gráficos a internacionalização das pequisas pode ser considerada baixa, porém existe forte participação desses pesquisadoes em âmbito nacional.
</p>
<p>
####Pesquisador ID_0556476746202406
```{r echo=FALSE}
z <- c(3,26)
barplot(z, beside=FALSE, col=c("forestgreen", "palegreen"), ylim = c(0,30))
legend("topleft",x=0, y=-2, xpd=TRUE, ncol=2, legend=c("Europa", "Brasil"),
       fill=c("forestgreen", "palegreen"), bty="n")
```

<p>
####Pesquisador ID_5874654544324539
```{r echo=FALSE, message=FALSE, warning=FALSE, paged.print=FALSE}
z <- c(0,14)
barplot(z, beside=FALSE, col=c("blue", "lightblue"), ylim = c(0,30))
legend("topleft",x=0, y=-2, xpd=TRUE, ncol=2, legend=c("Europa", "Brasil"),
       fill=c("blue", "lightblue"), bty="n")


```

#CRISP-DM Fase.Atividade 5 -  conclusões dos relatorios 3

##Quanto ao PPG de ensino de ciências

Portanto podemos observar que o programa de pós-graduação de ensino em ciências apresenta um baixo nível de internacionalização uma vez que grande parte de suas produções e orientações são voltadas a alunos de instituições nacionais e a periódicos nacionais em sua grande maioria publicados em língua portuguesa do Brasil.  

É importante também notar que o programa possui um grande grau de colaboração entre seus participantes uma vez que a maior parte das publicações são realizadas em grupos, assim como as produções literárias e artigos produzidos. Também foram observadas mudanças nas produções do departamento ao longo dos últimos anos que podem ser analisadas mais a fundo, aqui foi proposta uma relação com cortes de fundos mas que devem ser avaliados traçando relações com informações sobre o cenário brasileiro. 

Algumas informações sobre a mudança no quadro de funcionários também foi levantada durante a pesquisa e poderá também ser avaliada com mais profundidade para averiguar qual o real impacto disso no programa. 

##AQUI VAI O DO RAFAEL

##AQUI VAI O DO PAULO

O simples estudo dos datasets da Matemática permitiu tirar conclusões acerca de seu programa de pós-graduação e validar as informações contidas no site do programa. Assim como havia sido afirmado anterioremente o Departamento é capaz de oferecer oportunidades de estudo em diversos campos do saber, ainda assim não deixa de privilegiar as sub-áreas das Ciências Exatas como a Álgebra e a Estatística. De acordo com os resultados obtidos é possível notar que as áreas de pós-graduação dentro da Matemática que não trabalham diretamente com sub-áreas das exatas não possuem o mesmo grau de internacionalização que as demais, porém por serem numericamente inferiores não tem impacto direto na nota do curso que é alta, outra informação que foi validade de acordo com o que está no site do programa. 

#CRISP-DM Fase.Atividade 6

De que forma os produtos desenvolvidos pelo grupo poderiam ser colocados em uso prático regular, na organização cliente?

##CRISP-DM Fase.Atividade 6.2 -  Planejamento do monitoramento dos produtos 

De que forma seria possível realizar o monitoramento do funcionamento dos produtos em utilização no ambiente operacional?

##CRISP-DM Fase.Atividade 6.3 -  Planejamento de manuteção 

que manutenções, ajustes, mudanças, poderia ter que ser eventualmente realizadas no produto (scripts), quando em uso no ambiente operacional do cliente?


##CRISP-DM Fase.Atividade 6.6 -  Revisão sobre a execução do projeto

Deve-se fazer aqui o registro de lições aprendidas, bem como traçadas perspectivas futuras de aprimoramento deste trabalho, da disciplina de Ciência de Dados para Todos etc.

# Referências

* Azevedo, Mário Luiz Neves de, João Ferreira de Oliveira, e Afrânio Mendes Catani. “O Sistema Nacional de Pós-Graduação (SNPG) e o Plano Nacional de Educação (PNE 2014-2024): regulação, avaliação e financiamento”. Revista Brasileira de Política e Administração da Educação 32, nº 3 (2016). http://dx.doi.org/10.21573/vol32n32016.68576.
* Can, Fazli, Tansel Özyer, e Faruk Polat, orgs. State of the Art Applications of Social Network Analysis. Lecture Notes in Social Networks. Switzerland: Springer International Publishing, 2014.
* CAPES. “Documentos de Área”. CAPES.gov.br. Acessado 12 de junho de 2018. http://avaliacaoquadrienal.capes.gov.br/documentos-de-area.
* ———. “Plano Nacional de Pós-Graduação - PNPG 2011/2020 Vol. 1”. Brasília - DF, dezembro de 2010. http://www.capes.gov.br/images/stories/download/Livros-PNPG-Volume-I-Mont.pdf.
* ———. “Plano Nacional de Pós-Graduação - PNPG 2011/2020 Vol. 2”. Brasília - DF, dezembro de 2010. http://www.capes.gov.br/images/stories/download/PNPG_Miolo_V2.pdf.
* ———. “Sucupira: coleta de dados, docentes de pós-graduação stricto sensu no Brasil 2015”. CAPES - Banco de Metadados, 16 de março de 2016. http://metadados.capes.gov.br/index.php/catalog/63.
* Chapman, Pete, Julian Clinton, Randy Kerber, Thomas Khabaza, Thomas Reinartz, Colin Shearer, e Rüdiger Wirth. “CRISP-DM 1.0: Step-by-Step Data Mining Guide”. USA: CRISP-DM Consortium, 2000. https://www.the-modeling-agency.com/crisp-dm.pdf.
* Datacamp. “Machine Learning with R (Skill Track)”. Datacamp, 2018. https://www.datacamp.com/tracks/machine-learning.
* Fernandes, Jorge H C, e Ricardo Barros Sampaio. “DataScienceForAll”. Zotero, 13 de junho de 2018. https://www.zotero.org/groups/2197167/datascienceforall.
* ———. “Especificação do Trabalho Final da Disciplina de Ciência de Dados para Todos 2017.2: Estudo sobre a visibilidade internacional da produção científica das pós-graduações vinculadas às áreas de conhecimento da CAPES, na Universidade de Brasília (Comunicação Interna)”. Disciplina 116297 - Tópicos Avançados em Computadores, turma D, do semestre 2017.2, do Departamento de Ciência da Computação do Instituto de Ciências Exatas da Universidade de Brasília, 28 de novembro de 2017. https://aprender.ead.unb.br/pluginfile.php/474549/mod_resource/content/1/Estudo%20da%20Cie%CC%82ncia.pdf.
* Fernandes, Jorge H C, Ricardo Barros Sampaio, e João Ribas de Moura. “Ciência de Dados para Todos (Data Science   For All) - 2018.1 - Análise da Produção Científica e Acadêmica da Universidade de Brasília - Modelo de Relatório Final da Disciplina - Departamento de Ciência da Computação da UnB”. Disciplina 116297 - Tópicos Avançados em Computadores, turma D, do semestre 2018.1, do Departamento de Ciência da Computação do Instituto de Ciências Exatas da Universidade de Brasília, 13 de junho de 2018.
* Frickel, Scott, e Kelly Moore. The New Political Sociology of Science: Institutions, Networks, and Power. Science and technology in society. USA: The University of Wisconsin Press, 2006.
* Graduate Prospects Ltd. “Job profile: Higher education lecturer”, 2018. https://www.prospects.ac.uk/job-profiles/higher-education-lecturer.
* Kalpazidou Schmidt, Evanthia, e Ebbe Krogh Graversen. “Persistent factors facilitating excellence in research environments”. Higher Education 75, nº 2 (1º de fevereiro de 2018): 341–63. https://doi.org/10.1007/s10734-017-0142-0.
* Kilduff, Martin, e Wenpin Tsai. Social Networks and Organizations. UK: Sage Publications, 2003.
* Kolaczyk, Eric D., e Gábor Csárdi. Statistical Analysis of Network Data with R. USA: Springer, 2014.
* Kuhn, Max, Jed Wing, Steve Weston, Andre Williams, Chris Keefer, Allan Engelhardt, Tony Cooper, et al. “Package ‘Caret’ - Classification and Regression Training”, 27 de maio de 2018. https://cran.r-project.org/web/packages/caret/caret.pdf.
* Leite, Fernando César Lima. “Considerações básicas sobre  a Avaliação do Sistema  Nacional de Pós-Graduação”. Comunicação Pessoal (slides). Universidade de Brasília, abril de 2018. https://aprender.ead.unb.br/pluginfile.php/502250/mod_resource/content/1/Considera%C3%A7%C3%B5es%20b%C3%A1sicas%20sobre%20a%20Avalia%C3%A7%C3%A3o%20do%20Sistema%20Nacional.pdf.
* Lusher, Dean, Johan Koskinen, e Garry Robins, orgs. Exponential Random Graph Models for Social Networks: Theory, methods, and applications. Structural Analysis in the Social Sciences. USA: Cambridge University Press, 2013.
* Mariscal, Gonzalo, Óscar Marbán, e Covadonga Fernández. “A survey of data mining and knowledge discovery process models and methodologies”. The Knowledge Engineering Review 25, nº 2 (2010): 137–66. https://doi.org/10.1017/S0269888910000032.
* Nery, Guilherme, Ana Paula Bragaglia, Flávia Clemente, e Suzana Barbosa. “Nem tudo parece o que é: Entenda o que é plágio”. Instituto de Arte e Comunicação Social da UFF, 2009. http://www.noticias.uff.br/arquivos/cartilha-sobre-plagio-academico.pdf.
* Nooy, Wouter de, Andrej Mrvar, e Vladimir Batagelj. Exploratory Social Network Analysis with Pajek. Structural Analysis in the Social Sciences. USA: Routldge, 2005.
* Pátaro, Cristina Saitê de Oliveira, e Frank Antonio Mezzomo. “Sistema Nacional de Pós-Graduação no Brasil: estrutura, resultados e desafios para política de Estado - Lívio Amaral”. Revista Educação e Linguagens 2, nº 3 (julho de 2013): 11–17.
* Schwartzman, Simon. “A Ciência da Ciência”. Ciência Hoje 2, nº 11 (março de 1984): 54–59.
* Silver, Nate. The Signal and the Noise: Why so many predictions fail — but some don’t. USA: The Penguin Press HC, 2012.
* Vicari, Donatella, Akinori Okada, Giancarlo Ragozini, e Claus Wiehs. Analysis and Modeling of Complex Data in Behavioral and Social Sciences. Studies in Classifi cation, Data Analysis, and Knowledge Organization. Switzerland: Springer, 2014.
* Wickham, Hadley, e Garrett Grolemund. R for Data Science: Import, Tidy, Transform, Visualize, and Model Data. USA: O’Reilly, 2016.
